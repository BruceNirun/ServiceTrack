@inherits LayoutComponentBase
@using ServiceTrack.Components.Layout

<MudThemeProvider Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    @* 1. แก้ไข AppBar เพื่อเพิ่มลิงก์นำทาง *@
    <MudAppBar Elevation="1">
        <MudIcon Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" Size="Size.Large" />
        <div class="ml-3">
            <MudText Typo="Typo.h6" Style="line-height: 1.2;">ระบบแจ้งซ่อมองค์กร</MudText>
            <MudText Typo="Typo.body2" Style="line-height: 1;">Organizational Repair Request System</MudText>
        </div>
        <MudSpacer />

        <MudTooltip Text="การแจ้งเตือน">
            <MudIconButton Icon="@Icons.Material.Outlined.Notifications" Color="Color.Inherit" />
        </MudTooltip>
        
        <MudTooltip Text="โปรไฟล์ผู้ใช้">
            <MudIconButton Icon="@Icons.Material.Outlined.Person" Color="Color.Inherit" />
        </MudTooltip>
    </MudAppBar>
    
    <MainHeader/>

    <MudMainContent>
        @* ไม่ต้องมี MudContainer ที่นี่ *@
        @Body
    </MudMainContent>
</MudLayout>

@code {
    // 4. ลบโค้ดที่เกี่ยวกับ Drawer ออกไป
    private MudTheme _theme = new MudTheme()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = "#594AE2",
            PrimaryContrastText = Colors.Shades.White, 
            Secondary = "#00C853",
            Background = "#F4F7FC",
            AppbarBackground = "#FFFFFF", // เปลี่ยนสี AppBar เป็นสีขาว
            AppbarText = Colors.Gray.Darken3, // เปลี่ยนสีข้อความบน AppBar เป็นสีเทาเข้ม
            DrawerBackground = "#FFFFFF",
            DrawerText = Colors.Gray.Darken3, 
            DrawerIcon = Colors.Gray.Darken2,
            Surface = "#FFFFFF"
        },
        LayoutProperties = new LayoutProperties()
        {
            DefaultBorderRadius = "12px"
        }
    };
}